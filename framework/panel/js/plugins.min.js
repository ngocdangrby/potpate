window.et_panel=window.et_panel||{},function(a){a(document).ready(function(a){var b={plugins_page_actions:function(b,c){if(a(".et_plugin-nonce").length){var d=b.parents(".et_plugin"),e=d.attr("data-filter"),f=a(".error-text").text(),g={action:"envato_setup_plugins",helper:"plugins",type:"et_plugins_actions",slug:b.attr("data-slug"),wpnonce:a(document).find(".et_plugin-nonce").attr("data-plugin-nonce")},h=b.attr("data-action"),i=d.find(".plugin-action-text"),j="";if(!a(".et_filesystem").attr("data-filesystem"))return void alert(f);a(".et_plugin-control").css({"pointer-events":"none"}),d.addClass("in_progress"),"deactivate"==h?i.text(i.attr("data-deactivate")):"install"==h?i.text(i.attr("data-install")):"activate"==h?i.text(i.attr("data-activate")):"update"==h&&i.text(i.attr("data-update")),"deactivate"==b.attr("data-action")?(g.action="et_plugins_actions",g.type=b.attr("data-action"),a.ajax({method:"POST",url:ajaxurl,data:g,success:function(b){e=e.replace("active","disabled"),d.attr("data-filter",e),d.removeClass("et_plugin-active"),d.removeClass("in_progress"),d.find('.et_plugin-control[data-action="activate"]').removeClass("hidden"),d.find('.et_plugin-control[data-action="deactivate"]').addClass("hidden"),a('.plugin-filter[data-filter="all"]').trigger("click"),et_panel.et_delete_transient("etheme_plugins_info")},error:function(a){i.text(""),d.removeClass("in_progress"),alert(f)},complete:function(b){a(".et_plugin-control").css({"pointer-events":"all"}),i.text("")}})):a.ajax({method:"POST",url:ajaxurl,data:g,success:function(c){c.hash!=j?a.ajax({method:"POST",url:c.url,data:c,success:function(c){var f=et_panel.check_data(c);f?alert(f):(d.find('.et_plugin-control[data-action="update"]').addClass("hidden"),d.find('.et_plugin-control[data-action="activate"]').addClass("hidden"),d.find('.et_plugin-control[data-action="install"]').addClass("hidden"),d.find('.et_plugin-control[data-action="deactivate"]').removeClass("hidden")),e=e.replace("disabled","active"),d.attr("data-filter",e),d.addClass("et_plugin-active"),d.removeClass("in_progress"),"update"==b.attr("data-action")&&(d.find(".current-version").html("v."+d.find(".new-version").html()),d.find(".new-version-text").addClass("hidden")),a('.plugin-filter[data-filter="all"]').trigger("click")},error:function(){d.removeClass("in_progress"),i.text(""),alert(f)},complete:function(){a(".et_plugin-control").css({"pointer-events":"all"}),i.text("")}}):(i.text(""),alert(f))},error:function(a){i.text(""),alert(f)},complete:function(a){}})}},check_data:function(a){return a.includes("Destination folder already exists")?"Plugin installation failed, destination folder already exists":!(!a.includes("Plugin installation failed")&&!a.includes("An error occurred while installing"))&&"Plugin installation failed"},et_delete_transient:function(b){var c={action:"et_delete_transient",helper:"plugins",transient:b,wpnonce:a(document).find(".et_plugin-nonce").attr("data-plugin-nonce")};a.ajax({method:"POST",url:ajaxurl,data:c,success:function(a){},error:function(a){},complete:function(a){}})}};window.et_panel=Object.assign(window.et_panel,b);var c={1:{selector:".et_plugin-control",type:"click",callback:et_panel.plugins_page_actions}};a.each(c,function(b,c){"ready"==c.type?a(document).ready(function(b){c.callback(a(this),b)}):a(c.selector).on(c.type,function(b){c.callback(a(this),b)})})})}(jQuery,window.et_panel);