var ajaxFilters;!function(_){"use strict";var v;ajaxFilters={init:function(){v={in_progress:!1,categories:!1},this.ajaxFilters()},ajaxFilters:function(){function t(e){var t="";if(e.hasClass("dropdown_product_brand")){if(!(t=e.find("option:selected").data("url")))return}else t=e.attr("href");var r,i,a,e=e.parents(".etheme_widget_brands_filter");e.hasClass("on_brand")?(r=e.attr("data-shop-url"),i=function(e){var t={},r=document.createElement("a");r.href=e;for(var i=r.search.substring(1).split("&"),a=0;a<i.length;a++){var n=i[a].split("=");t[n[0]]=decodeURIComponent(n[1])}return t}(t),a=0,r+="?",_.each(i,function(e,t){a++,r=Object.keys(i).length>a?r+e+"="+t+"&":r+e+"="+t}),n(r)):n(t)}function n(e){_(".et-loader.product-ajax").addClass("loading"),_("body").addClass("ajax-progress"),v.in_progress=!0,v.reinit_price=!1;var f=e;f=(f=(f=(f=f.replace("?et_ajax=true&","?")).replace("?et_ajax=true","?")).replace("et_ajax=true&","")).replace("et_ajax=true",""),e.includes("?")?e=e.replace("?","?et_ajax=true&"):e+="?et_ajax=true",_.ajax({url:e,method:"GET",timeout:1e5,dataType:"text",beforeSend:function(){_(".sidebar.et-mini-content.active").removeClass("active"),_(".et-toggle-mob-sidebars-wrapper").removeClass("et-content-shown")},success:function(e){var t=_(e).find(".products-loop").html(),r=_(e).find(".sidebar").html(),i=_(e).find(".shop-filters").html(),a=_(e).find(".after-shop-loop").html(),n=_(e).find(".empty-category-block").html(),o=_(e).find(".view-switcher").html(),s=_(e).find(".products-per-page").html(),c=_(e).find(".term-description.et_second-description").html(),l=_(e).find(".term-description:not(.et_second-description)").html(),d=_(".category-description").length,p=_(e).find(".page-heading").html(),m=_(e).find(".page-heading").attr("style");a=(a=a.replace("?et_ajax=true","?")).replace("et_ajax=true","");var u,g=_(".content-page .products-loop"),h=_(".content-page .empty-category-block");_("body").hasClass("search-results")&&_(".products-title, .pages-result-slider, .posts-result-slider, .portfolios-result-slider").remove(),n?(g.html(""),h.length?(h.html(n),h.removeClass("hidden")):g.after('<div class="empty-category-block">'+n+"</div>")):(h.html("").addClass("hidden"),g.html(t)),o&&(u=g.attr("data-row-count"),t=_(e).find(".view-switcher").find(".switcher-active > a").attr("data-row-count"),_(".view-switcher").html(o),2<_(e).find(".view-switcher").find(".switch-grid").length&&g.removeClass("row-count-"+u).addClass("row-count-"+t).attr("data-row-count",t)),v.categories&&"inherit"!=etAjaxFiltersConfig.loop_prop_columns_category&&(u=g.attr("data-row-count"),g.removeClass("row-count-"+u).addClass("row-count-"+etAjaxFiltersConfig.loop_prop_columns_category).attr("data-row-count",etAjaxFiltersConfig.loop_prop_columns_category),v.categories=!1),s&&_(".products-per-page").html(s),p&&_(".page-heading").html(p),m?_(".page-heading").attr("style",m):_(".page-heading").attr("style",""),l?(_(".term-description:not(.et_second-description)").length||d||(4==etAjaxFiltersConfig.product_page_banner_pos?_(".content-page").before('<div class="term-description"><div>'):3==etAjaxFiltersConfig.product_page_banner_pos?_(".content-page").prepend('<div class="term-description"><div>'):1==etAjaxFiltersConfig.product_page_banner_pos?_(".main-products-loop").prepend('<div class="term-description"><div>'):_(".main-products-loop").append('<div class="term-description"><div>')),_(d?".category-description":".term-description:not(.et_second-description)").html(l)):d?_(".category-description").html():_(".term-description:not(.et_second-description)").html(""),c?(_(".term-description.et_second-description").length||_(".after-shop-loop").after('<div class=" term-description et_second-description"><div>'),_(".term-description.et_second-description").html(c)):_(".term-description.et_second-description").html(""),_(".content-page .sidebar").html(r),_(".content-page .shop-filters").html(i),_.each(_("select.woocommerce-widget-layered-nav-dropdown"),function(){var e=_(this);jQuery(e).selectWoo({minimumResultsForSearch:5,width:"100%",language:{noResults:function(){return etAjaxFiltersConfig.notices.noMatchFound}}})}),"undefined"==typeof woocommerce_price_slider_params&&(e=_(e).find(".et_woocommerce_price_slider_params").html(),_("body").prepend(e)),etTheme.categoriesAccordion(),a?_(".content-page .after-shop-loop").html(a):_(".content-page .after-shop-loop").html(""),etTheme.AjaxElement(),window.history.pushState("","",f),_(document).trigger("et_ajax_content_loaded")},error:function(e){etTheme.et_notice("ajax-filters","error")},complete:function(){var e;_(".et-loader.product-ajax").removeClass("loading"),etTheme.reinitSwatches(),etTheme.contentProdImages(),etTheme.countdown(),_("body").removeClass("swc-default-done"),etTheme.widgetsOpenCloseDefault(),ajaxFilters.reinit_price_filter(),etTheme.sidebarMobile(),etTheme.stickySidebar(),_("body").removeClass("ajax-progress"),v.in_progress=!1,etTheme.global_image_lazy(),etAjaxFiltersConfig.scroll_top_after_ajax&&(e=_(".content-page .main-products-loop > .products-loop").offset().top,_(".content-page .filter-wrap").length&&(e-=_(".content-page .filter-wrap").outerHeight()),e-=110,_("html, body").animate({scrollTop:e},1e3)),etConfig.woocommerceSettings.sidebar_widgets_dropdown_limited&&etTheme.widgetsShowMore()}})}function i(r,i,a){var n=setInterval(function(){var e,t=parseFloat(r.get(0).style.left);i?100<=t+.3?(r.css("left","100%"),clearInterval(n)):r.css("left",t+.3+"%"):t-.3<=0?(r.css("left",0),clearInterval(n)):r.css("left",t-.3+"%"),a&&(e=_(".etheme-price-filter .ui-slider-range"),t=_(e).get(0).style.width,100<=parseFloat(t)+.3?e.css("width","100%"):e.css("width",parseFloat(t)+.3+"%"))},1)}etAjaxFiltersConfig.woocommerceSettings.ajax_filters&&(_(document).on("click",".content-page .etheme-ajax-filter, .content-page .widget_product_categories ul li a, .content-page .etheme_swatches_filter ul li a, .content-page .woocommerce-widget-layered-nav ul li a, .content-page .widget_rating_filter ul li a, .content-page .widget_layered_nav_filters ul li a",function(e){var t;e.preventDefault(),v.in_progress||(t=_(this).attr("href"),e=window.location.href,_(this).parents(".sidebar-widget").hasClass("widget_product_categories")&&(v.categories=!0),_(this).hasClass("remove-brand")||_(this).parents(".widget_layered_nav_filters").hasClass("etheme-active-filters")||1<e.indexOf("filter_brand")&&(e=new URL(e).searchParams.get("filter_brand"),t=t.replace("?","?filter_brand="+e+"&")),n(t))}),_(document).on("change",".content-page .dropdown_product_brand",function(e){e.preventDefault(),t(_(this))}),_(document).on("click",".content-page .etheme_widget_brands_filter ul li a",function(e){e.preventDefault(),t(_(this))}),_(document).on("click",".content-page .et-reset-price",function(e){var t,r;e.preventDefault(),v.in_progress||(r=(t=_(this).parents(".etheme-price-filter form")).find("#min_price").data("min"),e=t.find("#max_price").data("max"),t.find("#min_price").val(r),t.find("#max_price").val(e),_(document.body).trigger("price_slider_slide",[r,e]),_.each(_(".etheme-price-filter .ui-slider-handle"),function(e,t){i(_(t),!(1!=e),!0)}),i(_(".etheme-price-filter .ui-slider-range"),!1,!1),n(t.attr("action")+"?"+t.find("input").not("#min_price, #max_price").serialize()))}),_(document).on("price_slider_change",function(){var e;_(".et-reset-price").removeClass("hidden"),v.in_progress||(!(e=_(this).find(".etheme-price-filter form").first())||e.length<1||n(e.attr("action")+"?"+e.serialize()))}),_(document).on("click",'.content-page .widget_price_filter .button:not(".et-reset-price")',function(e){e.preventDefault(),v.in_progress||n((e=_(this).closest("form")).attr("action")+"?"+e.serialize())}),_(document).on("change",".content-page select.woocommerce-widget-layered-nav-dropdown",function(e){var t,r,i,a;e.preventDefault(),v.in_progress||(t=_(this),r=window.location.href,a=t.attr("class"),e=i="",a=a.split(" "),_.each(a,function(e,t){t.includes("dropdown_layered_nav_")&&(i=t.replace("dropdown_layered_nav_",""))}),i="filter_"+i,(e=r.includes(i)?(a=t.parents("form").find("input[name="+i+"]").attr("value"),r.replace(i+"="+a,i+"="+t.val())):r.includes("?")?r.replace("?","?"+i+"="+t.val()+"&"):r+"?"+i+"="+t.val())&&n(e))}),_(document).on("submit",".content-page .woocommerce-ordering",function(e){var t,r,i,a;e.preventDefault(),v.in_progress||(t=_(this).serializeArray(),r=new URL(window.location.href),i=new URLSearchParams(r.search),e="",_.each(t,function(e,t){"orderby"==t.name&&(a=t.value)}),i.set("orderby",a),r.search=i.toString(),(e=r.toString())&&n(e))}),_(document).on("click",".content-page .view-switcher a",function(e){var t,r;e.preventDefault(),v.in_progress||(t=_(this).attr("href"),r=_(this).attr("data-type"),e=_(this).parents(".filter-wrap").parent().find(".products-loop"),t&&(n(t),"grid"==r?e.removeClass("products-list").addClass("products-grid"):e.removeClass("products-grid").addClass("products-list")))}),_(document).on("change",".content-page .et-per-page-select",function(e){var t,r,i,a;e.preventDefault(),v.in_progress||(t=(i=_(this).parents("form")).serializeArray(),r=window.location.href,i.attr("action")&&(r=i.attr("action")),r=new URL(r),e=new URLSearchParams(r.search),a=i="",_.each(t,function(e,t){"et_per_page"==t.name&&(a=t.value)}),e.set("et_per_page",a),r.search=e.toString(),(i=r.toString())&&n(i))})),etAjaxFiltersConfig.woocommerceSettings.ajax_pagination&&_(document).on("click",".content-page .woocommerce-pagination ul li a",function(e){e.preventDefault(),v.in_progress||n(_(this).attr("href"))})},reinit_price_filter:function(){if((void 0===v.reinit_price||!v.reinit_price)&&(v.reinit_price=!0,_(".price_slider").length)){if("undefined"==typeof woocommerce_price_slider_params)return!1;_("input#min_price, input#max_price").hide(),_(".price_slider, .price_label").show();var e=_(".price_slider_amount #min_price"),t=_(".price_slider_amount #max_price"),r=e.data("min"),i=t.data("max"),a=parseInt(e.val()?e.val():r,10),n=parseInt(t.val()?t.val():i,10);_(".price_slider").slider({range:!0,animate:!0,min:r,max:i,values:[a,n],create:function(){e.val(a),t.val(n),_(document.body).trigger("price_slider_create",[a,n])},slide:function(e,t){_("input#min_price").val(t.values[0]),_("input#max_price").val(t.values[1]),_(document.body).trigger("price_slider_slide",[t.values[0],t.values[1]])},change:function(e,t){_(document.body).trigger("price_slider_change",[t.values[0],t.values[1]])}})}}},_(document).ready(function(){ajaxFilters.init()})}(jQuery);